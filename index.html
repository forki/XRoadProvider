<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>XRoadProvider
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Type providers for generating types and service interfaces for XRoad producers."/>
    <meta name="author" content="Janno PÃµldma"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/XRoadProvider/content/style.css" />
    <script type="text/javascript" src="/XRoadProvider/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/janno-p/XRoadProvider">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/XRoadProvider/index.html">XRoadProvider</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="XRoadProvider" class="anchor" href="#XRoadProvider">XRoadProvider</a></h1>

<p>Collection of type providers that make easier the integration process for data exchange layer X-Road. Currently
two different type providers are implemented:</p>

<ul>
<li><p><a href="reference/xroad-providers-xroadproducer.html">XRoadProducer</a> is generated type provider which offers type
signatures for types and method call functionality for operations defined in producers service description.</p></li>
<li><p><a href="reference/xroad-providers-xroadserver.html">XRoadServer</a> is erased type provider that discovers available
producer names from specified security server and offers their details inside development environment.</p></li>
</ul>

<div class="row">
  <div class="span1"></div>
  <div class="span6">
    <div class="well well-small" id="nuget">
      The XRoadProvider library can be <a href="https://nuget.org/packages/XRoadProvider">installed from NuGet</a>:
      <pre>PM> Install-Package XRoadProvider -Pre</pre>
    </div>
  </div>
  <div class="span1"></div>
</div>

<h2><a name="Example" class="anchor" href="#Example">Example</a></h2>

<p>This example demonstrates the use of the XRoadProvider:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Reference the type provider assembly.</span>
<span class="prep">#r</span> <span class="s">&quot;XRoadProvider.dll&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">XRoad</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">Providers</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="t">Maakataster</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="t">XRoadProducer</span><span class="o">&lt;</span> <span class="s">@&quot;C:\Work\Thesis\producers\Maakataster.wsdl&quot;</span><span class="o">&gt;</span>

<span class="c">// Initialize service interface which provides access to operation methods.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">myport</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="i">Maakataster</span><span class="o">.</span><span class="i">myservice</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="i">myport</span>()

<span class="c">// Override default values acquired from port definition (when necessary).</span>
<span onmouseout="hideTip(event, 'fs5', 8)" onmouseover="showTip(event, 'fs5', 8)" class="i">myport</span><span class="o">.</span><span class="i">ProducerName</span> <span class="o">&lt;-</span> <span class="s">&quot;maakataster&quot;</span>
<span onmouseout="hideTip(event, 'fs5', 9)" onmouseover="showTip(event, 'fs5', 9)" class="i">myport</span><span class="o">.</span><span class="i">ProducerUri</span> <span class="o">&lt;-</span> <span class="s">&quot;http://localhost:8001/&quot;</span>

<span class="c">// Assign X-Road header values.</span>
<span onmouseout="hideTip(event, 'fs5', 10)" onmouseover="showTip(event, 'fs5', 10)" class="i">myport</span><span class="o">.</span><span class="i">Ametniknimi</span> <span class="o">&lt;-</span> <span class="s">&quot;toomas.dumpty&quot;</span>

<span class="c">// Initialize request parameters.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 11)" onmouseover="showTip(event, 'fs6', 11)" class="i">request</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs3', 12)" onmouseover="showTip(event, 'fs3', 12)" class="i">Maakataster</span><span class="o">.</span><span class="i">DefinedTypes</span><span class="o">.</span><span class="i">maakataster</span><span class="o">.</span><span class="i">ky_paring</span>()
<span onmouseout="hideTip(event, 'fs6', 13)" onmouseover="showTip(event, 'fs6', 13)" class="i">request</span><span class="o">.</span><span class="i">katastritunnus</span> <span class="o">&lt;-</span> <span class="s">&quot;test&quot;</span>
<span onmouseout="hideTip(event, 'fs6', 14)" onmouseover="showTip(event, 'fs6', 14)" class="i">request</span><span class="o">.</span><span class="i">ky_max</span> <span class="o">&lt;-</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs3', 15)" onmouseover="showTip(event, 'fs3', 15)" class="i">Maakataster</span><span class="o">.</span><span class="i">DefinedTypes</span><span class="o">.</span><span class="i">maakataster</span><span class="o">.</span><span class="i">t_ky_max</span>(<span class="i">BaseValue</span><span class="o">=</span><span class="s">&quot;001&quot;</span>)

<span class="c">// Execute service request against specified adapter.</span>
<span class="k">let</span> _,<span onmouseout="hideTip(event, 'fs7', 16)" onmouseover="showTip(event, 'fs7', 16)" class="i">response</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 17)" onmouseover="showTip(event, 'fs5', 17)" class="i">myport</span><span class="o">.</span><span class="i">ky</span>(<span onmouseout="hideTip(event, 'fs6', 18)" onmouseover="showTip(event, 'fs6', 18)" class="i">request</span>)

<span class="c">// Display results to console.</span>
<span onmouseout="hideTip(event, 'fs7', 19)" onmouseover="showTip(event, 'fs7', 19)" class="i">response</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 20)" onmouseover="showTip(event, 'fs8', 20)" class="t">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 21)" onmouseover="showTip(event, 'fs9', 21)" class="f">iteri</span> (<span onmouseout="hideTip(event, 'fs10', 22)" onmouseover="showTip(event, 'fs10', 22)" class="f">printfn</span> <span class="s">&quot;</span><span class="pf">%d</span><span class="s">) </span><span class="pf">%A</span><span class="s">&quot;</span>)
</code></pre></td>
</tr>
</table>

<p>As an alternative to asking service descriptions from security server, it's also possible to
exclude security server from development process by using local WSDL definitions instead.</p>

<h2><a name="MIME-Multipart-attachment-support" class="anchor" href="#MIME-Multipart-attachment-support">MIME/Multipart attachment support</a></h2>

<p>X-Road method calls may require MIME/multipart message format in case of binary content. For
that purpose type provider defines special type <code>BinaryContent</code> which handles attachments according
to X-Road specification.</p>

<p>Usage example of <code>BinaryContent</code> type:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs11', 23)" onmouseover="showTip(event, 'fs11', 23)" class="t">Aktorstest</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 24)" onmouseover="showTip(event, 'fs4', 24)" class="t">XRoadProducer</span><span class="o">&lt;</span> <span class="s">@&quot;C:\Work\Thesis\producers\Aktorstest.wsdl&quot;</span><span class="o">&gt;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 25)" onmouseover="showTip(event, 'fs12', 25)" class="i">service</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 26)" onmouseover="showTip(event, 'fs11', 26)" class="i">Aktorstest</span><span class="o">.</span><span class="i">aktorstestService</span><span class="o">.</span><span class="i">Test</span>()

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 27)" onmouseover="showTip(event, 'fs13', 27)" class="i">content</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs14', 28)" onmouseover="showTip(event, 'fs14', 28)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 29)" onmouseover="showTip(event, 'fs15', 29)" class="i">IO</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs16', 30)" onmouseover="showTip(event, 'fs16', 30)" class="t">MemoryStream</span>([| <span class="n">0uy</span>; <span class="n">1uy</span>; <span class="n">2uy</span>; <span class="n">3uy</span> |])

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 31)" onmouseover="showTip(event, 'fs6', 31)" class="i">request</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 32)" onmouseover="showTip(event, 'fs11', 32)" class="i">Aktorstest</span><span class="o">.</span><span class="i">DefinedTypes</span><span class="o">.</span><span class="i">aktorstest</span><span class="o">.</span><span class="i">fileUploadMTOM</span>()
<span onmouseout="hideTip(event, 'fs6', 33)" onmouseover="showTip(event, 'fs6', 33)" class="i">request</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 34)" onmouseover="showTip(event, 'fs6', 34)" class="i">request</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs11', 35)" onmouseover="showTip(event, 'fs11', 35)" class="i">Aktorstest</span><span class="o">.</span><span class="i">DefinedTypes</span><span class="o">.</span><span class="i">aktorstest</span><span class="o">.</span><span class="i">fileUploadMTOM</span><span class="o">.</span><span class="i">requestType</span>()
<span onmouseout="hideTip(event, 'fs6', 36)" onmouseover="showTip(event, 'fs6', 36)" class="i">request</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 37)" onmouseover="showTip(event, 'fs6', 37)" class="i">request</span><span class="o">.</span><span class="i">filemtom</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs11', 38)" onmouseover="showTip(event, 'fs11', 38)" class="i">Aktorstest</span><span class="o">.</span><span class="i">BinaryContent</span>(<span onmouseout="hideTip(event, 'fs13', 39)" onmouseover="showTip(event, 'fs13', 39)" class="i">content</span>)
<span onmouseout="hideTip(event, 'fs6', 40)" onmouseover="showTip(event, 'fs6', 40)" class="i">request</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 41)" onmouseover="showTip(event, 'fs6', 41)" class="i">request</span><span class="o">.</span><span class="i">fileName</span> <span class="o">&lt;-</span> <span class="s">&quot;file.bin&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 42)" onmouseover="showTip(event, 'fs17', 42)" class="i">response</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 43)" onmouseover="showTip(event, 'fs12', 43)" class="i">service</span><span class="o">.</span><span class="i">fileUploadMTOM</span>(<span onmouseout="hideTip(event, 'fs6', 44)" onmouseover="showTip(event, 'fs6', 44)" class="i">request</span>)
</code></pre></td>
</tr>
</table>

<h2><a name="Type-provider-for-producer-discovery" class="anchor" href="#Type-provider-for-producer-discovery">Type provider for producer discovery</a></h2>

<p>XRoadProvider package includes separate type provider to retrieve producer information from security
server. Resulting type contains details about all producers available and their WSDL URIs which may
be used as parameter to <code>XRoadProducer</code> provider to initialize service interfaces.</p>

<p>Example use of <code>XRoadServer</code> type provider:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Acquire list of producer from security server.</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs18', 45)" onmouseover="showTip(event, 'fs18', 45)" class="t">SecurityServer</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 46)" onmouseover="showTip(event, 'fs19', 46)" class="t">XRoadServer</span><span class="o">&lt;</span><span class="s">&quot;xxx.xxx.xx.xxx&quot;</span><span class="o">&gt;</span>

<span class="c">// Initialize service interface for specific producer using details from security server.</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 47)" onmouseover="showTip(event, 'fs3', 47)" class="i">Maakataster</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 48)" onmouseover="showTip(event, 'fs4', 48)" class="i">XRoadProducer</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs18', 49)" onmouseover="showTip(event, 'fs18', 49)" class="i">SecurityServer</span><span class="o">.</span><span class="i">Producers</span><span class="o">.</span><span class="i">adsv5</span><span class="o">.</span><span class="i">WsdlUri</span><span class="o">&gt;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 50)" onmouseover="showTip(event, 'fs12', 50)" class="i">service</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 51)" onmouseover="showTip(event, 'fs3', 51)" class="i">Maakataster</span><span class="o">.</span><span class="i">myservice</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs5', 52)" onmouseover="showTip(event, 'fs5', 52)" class="i">myport</span>()

<span class="c">// Use default security server end-point since WSDL has usually invalid value.</span>
<span onmouseout="hideTip(event, 'fs12', 53)" onmouseover="showTip(event, 'fs12', 53)" class="i">service</span><span class="o">.</span><span class="i">ProducerUri</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs18', 54)" onmouseover="showTip(event, 'fs18', 54)" class="i">SecurityServer</span><span class="o">.</span><span class="i">RequestUri</span>
</code></pre></td>
</tr>
</table>

<h2><a name="Samples-amp-documentation" class="anchor" href="#Samples-amp-documentation">Samples &amp; documentation</a></h2>

<p>The library comes with comprehensible documentation. 
It can include tutorials automatically generated from <code>*.fsx</code> files in <a href="https://github.com/fsprojects/XRoadProvider/tree/master/docs/content">the content folder</a>. 
The API reference is automatically generated from Markdown comments in the library implementation.</p>

<ul>
<li><p><a href="tutorial.html">Tutorial</a> contains a further explanation of this sample library.</p></li>
<li><p><a href="reference/index.html">API Reference</a> contains automatically generated documentation for all types, modules
and functions in the library. This includes additional brief samples on using most of the
functions.</p></li>
</ul>

<h2><a name="Contributing-and-copyright" class="anchor" href="#Contributing-and-copyright">Contributing and copyright</a></h2>

<p>The project is hosted on <a href="https://github.com/fsprojects/XRoadProvider">GitHub</a> where you can <a href="https://github.com/fsprojects/XRoadProvider/issues">report issues</a>, fork 
the project and submit pull requests. If you're adding a new public API, please also 
consider adding <a href="https://github.com/fsprojects/XRoadProvider/tree/master/docs/content">samples</a> that can be turned into a documentation. You might
also want to read the <a href="https://github.com/fsprojects/XRoadProvider/blob/master/README.md">library design notes</a> to understand how it works.</p>

<p>The library is available under Public Domain license, which allows modification and 
redistribution for both commercial and non-commercial purposes. For more information see the 
<a href="https://github.com/fsprojects/XRoadProvider/blob/master/LICENSE.txt">License file</a> in the GitHub repository.</p>

<div class="tip" id="fs1">namespace XRoad</div>
<div class="tip" id="fs2">namespace XRoad.Providers</div>
<div class="tip" id="fs3">type Maakataster<br /><br />Full name: Index.Maakataster</div>
<div class="tip" id="fs4">type XRoadProducer<br /><br />Full name: XRoad.Providers.XRoadProducer<br /><em><br /><br />Type provider for generating service interfaces and data types for specific X-Road producer.</em></div>
<div class="tip" id="fs5">val myport : obj<br /><br />Full name: Index.myport</div>
<div class="tip" id="fs6">val request : obj<br /><br />Full name: Index.request</div>
<div class="tip" id="fs7">val response : obj []<br /><br />Full name: Index.response</div>
<div class="tip" id="fs8">module Array<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs9">val iteri : action:(int -&gt; &#39;T -&gt; unit) -&gt; array:&#39;T [] -&gt; unit<br /><br />Full name: Microsoft.FSharp.Collections.Array.iteri</div>
<div class="tip" id="fs10">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs11">type Aktorstest<br /><br />Full name: Index.Aktorstest</div>
<div class="tip" id="fs12">val service : obj<br /><br />Full name: Index.service</div>
<div class="tip" id="fs13">val content : System.IO.MemoryStream<br /><br />Full name: Index.content</div>
<div class="tip" id="fs14">namespace System</div>
<div class="tip" id="fs15">namespace System.IO</div>
<div class="tip" id="fs16">Multiple items<br />type MemoryStream =<br />&#160;&#160;inherit Stream<br />&#160;&#160;new : unit -&gt; MemoryStream + 6 overloads<br />&#160;&#160;member CanRead : bool<br />&#160;&#160;member CanSeek : bool<br />&#160;&#160;member CanWrite : bool<br />&#160;&#160;member Capacity : int with get, set<br />&#160;&#160;member Flush : unit -&gt; unit<br />&#160;&#160;member GetBuffer : unit -&gt; byte[]<br />&#160;&#160;member Length : int64<br />&#160;&#160;member Position : int64 with get, set<br />&#160;&#160;member Read : buffer:byte[] * offset:int * count:int -&gt; int<br />&#160;&#160;...<br /><br />Full name: System.IO.MemoryStream<br /><br />--------------------<br />System.IO.MemoryStream() : unit<br />System.IO.MemoryStream(capacity: int) : unit<br />System.IO.MemoryStream(buffer: byte []) : unit<br />System.IO.MemoryStream(buffer: byte [], writable: bool) : unit<br />System.IO.MemoryStream(buffer: byte [], index: int, count: int) : unit<br />System.IO.MemoryStream(buffer: byte [], index: int, count: int, writable: bool) : unit<br />System.IO.MemoryStream(buffer: byte [], index: int, count: int, writable: bool, publiclyVisible: bool) : unit</div>
<div class="tip" id="fs17">val response : obj<br /><br />Full name: Index.response</div>
<div class="tip" id="fs18">type SecurityServer = obj<br /><br />Full name: Index.SecurityServer</div>
<div class="tip" id="fs19">type XRoadServer<br /><br />Full name: XRoad.Providers.XRoadServer<br /><em><br /><br />Type provider which discovers available producers from specified X-Road security server.</em></div>

        </div>
        <div class="span3">
          <img src="/XRoadProvider/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">XRoadProvider</li>
            <li><a href="/XRoadProvider/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/XRoadProvider">Get Library via NuGet</a></li>
            <li><a href="http://github.com/janno-p/XRoadProvider">Source Code on GitHub</a></li>
            <li><a href="/XRoadProvider/license.html">License</a></li>
            <li><a href="/XRoadProvider/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/XRoadProvider/tutorial.html">Sample tutorial</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/XRoadProvider/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/janno-p/XRoadProvider"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
